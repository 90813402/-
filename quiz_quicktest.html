<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ç†äº‹é•·ç›ƒåœ‹è¡“éŒ¦æ¨™è³½ ç·šä¸Šæ¸¬é©—</title>
  <style>
    :root {
      --bg: #0f172a;
      --panel: #111827;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #22d3ee;
      --accent-2: #60a5fa;
      --correct: #16a34a;
      --wrong: #dc2626;
      --border: #1f2937;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, "Noto Sans TC", "Microsoft JhengHei", "Apple LiGothic Medium", sans-serif;
      background: radial-gradient(1200px 800px at 80% -10%, rgba(34,211,238,0.12), transparent 60%),
                  radial-gradient(1000px 1000px at -10% 120%, rgba(96,165,250,0.12), transparent 60%),
                  var(--bg);
      color: var(--text);
      min-height: 100dvh;
      display: grid;
      place-items: center;
      padding: 24px;
    }
    .app {
      width: 100%;
      max-width: 760px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0)) , var(--panel);
      border: 1px solid var(--border);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.02);
      overflow: hidden;
    }
    header {
      padding: 22px 22px 10px;
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between; gap: 8px;
    }
    .title { font-weight: 800; letter-spacing: .5px; }
    .muted { color: var(--muted); font-size: 14px; }
    .progress-wrap {
      display: flex; align-items: center; gap: 10px;
      width: 100%;
      padding: 16px 22px 0;
    }
    .progress {
      flex: 1;
      height: 10px;
      background: #0b1220;
      border-radius: 999px;
      border: 1px solid var(--border);
      overflow: hidden;
    }
    .progress > span {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      transition: width .35s ease;
    }
    main {
      padding: 22px;
      display: grid;
      gap: 16px;
    }
    .card {
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px;
      background: rgba(255,255,255,0.02);
    }
    h2.question {
      margin: 0 0 8px;
      line-height: 1.4;
      font-size: 22px;
      font-weight: 700;
    }
    ol.options {
      list-style: none;
      padding: 0; margin: 0;
      display: grid; gap: 10px;
    }
    button.opt {
      text-align: left;
      width: 100%;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #0b1220;
      color: var(--text);
      cursor: pointer;
      transition: transform .08s ease, border-color .2s ease, background .2s ease;
      position: relative;
    }
    button.opt:hover { transform: translateY(-1px); border-color: rgba(255,255,255,0.12); }
    button.opt[disabled] { cursor: not-allowed; opacity: .9; transform: none; }
    button.opt.correct { border-color: rgba(34,197,94,.6); background: rgba(22,163,74,.15); }
    button.opt.wrong { border-color: rgba(239,68,68,.6); background: rgba(220,38,38,.12); }
    .controls {
      display: flex; gap: 10px; justify-content: space-between; align-items: center; margin-top: 4px;
    }
    .pill {
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: #0b1220;
      font-size: 12px;
    }
    .btn {
      padding: 10px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      color: var(--text);
      cursor: pointer;
      font-weight: 700;
      letter-spacing: .3px;
    }
    .btn.primary { border-color: transparent; background: linear-gradient(90deg, var(--accent), var(--accent-2)); color: #0b1220; }
    .center { text-align: center; }
    .result {
      display: grid; gap: 10px; padding: 12px;
    }
    .review { display: grid; gap: 10px; }
    .review .item {
      border: 1px dashed var(--border);
      border-radius: 12px;
      padding: 12px;
      background: rgba(255,255,255,0.02);
    }
    footer { padding: 0 22px 22px; color: var(--muted); font-size: 12px; }
    .small { font-size: 12px; }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div>
        <div class="title">ç†äº‹é•·ç›ƒåœ‹è¡“éŒ¦æ¨™è³½ï½œç·šä¸Šæ¸¬é©—</div>
        <div class="muted">ä¾ã€Šç«¶è³½è¦ç¨‹ã€‹è£½ä½œçš„ 10 é¡Œé¸æ“‡é¡Œ</div>
      </div>
      <div class="pill" id="score-pill">å¾—åˆ†ï¼š0</div>
    </header>

    <div class="progress-wrap">
      <div class="muted small" id="progress-text">ç¬¬ 1 / 10 é¡Œ</div>
      <div class="progress"><span id="progress-bar"></span></div>
    </div>

    <main>
      <section class="card" id="quiz-card">
        <h2 class="question" id="question">è¼‰å…¥ä¸­â€¦</h2>
        <ol class="options" id="options"></ol>
        <div class="controls">
          <div class="muted small" id="feedback">é¸æ“‡ä½ çš„ç­”æ¡ˆ</div>
          <div style="display:flex; gap:8px;">
            <button class="btn" id="skip-btn" title="ç•¥éæ­¤é¡Œï¼ˆä¸è¨ˆåˆ†ï¼‰">ç•¥é</button>
            <button class="btn primary" id="next-btn" disabled>ä¸‹ä¸€é¡Œ</button>
          </div>
        </div>
      </section>

      <section class="card result" id="result-card" style="display:none;">
        <h2 class="question center">æ¸¬é©—å®Œæˆ ğŸ‰</h2>
        <div class="center" id="final-score"></div>
        <div class="small center muted" id="time-used"></div>
        <div class="review" id="review"></div>
        <div class="center" style="margin-top:8px;">
          <button class="btn" id="retry-btn">å†æ¸¬ä¸€æ¬¡</button>
          <button class="btn" id="download-btn">ä¸‹è¼‰ä½œç­”è¨˜éŒ„</button>
        </div>
      </section>
    </main>

    <footer>
      å°æé†’ï¼šæœ¬æ¸¬é©—åƒ…ä¾›ç·´ç¿’ï¼Œé¡Œç›®ä¾†æºç‚ºã€Š114å¹´å½°åŒ–ç¸£é«”è‚²æœƒç†äº‹é•·ç›ƒåœ‹è¡“éŒ¦æ¨™è³½ç«¶è³½è¦ç¨‹ã€‹ã€‚
    </footer>
  </div>

  <script>
    // é¡Œåº«ï¼ˆ10 é¡Œï¼‰
    const QUESTIONS = [
      {
        q: "114å¹´å½°åŒ–ç¸£ç†äº‹é•·ç›ƒåœ‹è¡“éŒ¦æ¨™è³½æ¯”è³½æ—¥æœŸç‚ºï¼Ÿ",
        options: ["7æœˆ18æ—¥", "7æœˆ19æ—¥", "7æœˆ20æ—¥", "7æœˆ21æ—¥"],
        answer: "7æœˆ20æ—¥"
      },
      {
        q: "æ¯”è³½åœ°é»åœ¨å“ªè£¡èˆ‰è¡Œï¼Ÿ",
        options: ["å½°åŒ–ç¸£ç«‹é«”è‚²é¤¨", "å½°åŒ–å¸‚å—èˆˆåœ‹å°æ´»å‹•ä¸­å¿ƒ", "å½°åŒ–ç¸£è­°æœƒå»£å ´", "å½°å®‰åœ‹ä¸­é«”è‚²é¤¨"],
        answer: "å½°åŒ–å¸‚å—èˆˆåœ‹å°æ´»å‹•ä¸­å¿ƒ"
      },
      {
        q: "å–®ç·´å ±åè²»ç”¨ç‚ºï¼Ÿ",
        options: ["æ¯äººæ¯é …200å…ƒ", "æ¯äººæ¯é …300å…ƒ", "æ¯äººæ¯é …500å…ƒ", "å…è²»"],
        answer: "æ¯äººæ¯é …300å…ƒ"
      },
      {
        q: "åœ˜ç·´å ±åæ™‚ï¼Œæ¯éšŠæ‹³è¡“çµ„äººæ•¸é™åˆ¶ç‚ºï¼Ÿ",
        options: ["2-4äºº", "3-5äºº", "4-7äºº", "5-8äºº"],
        answer: "4-7äºº"
      },
      {
        q: "å­¸ç”Ÿçµ„ A5 çµ„æ˜¯å±¬æ–¼å“ªå€‹å¹´é½¡å±¤ï¼Ÿ",
        options: ["å¹¼å…’åœ’", "åœ‹å°ä¸­å¹´ç´š", "åœ‹ä¸­çµ„", "é«˜ä¸­çµ„"],
        answer: "åœ‹ä¸­çµ„"
      },
      {
        q: "ç¤¾æœƒçµ„ B2 çš„å¹´é½¡ç¯„åœç‚ºï¼Ÿ",
        options: ["19-25æ­²", "26-30æ­²", "31-35æ­²", "36-40æ­²"],
        answer: "26-30æ­²"
      },
      {
        q: "æ¯”è³½è¦å‰‡æ¡ç”¨å“ªä¸€å–®ä½å¯©å®šçš„è¦å‰‡ï¼Ÿ",
        options: ["æ•™è‚²éƒ¨é«”è‚²ç½²", "ä¸­è¯å¥§æœƒ", "ä¸­è¯æ°‘åœ‹é«”è‚²é‹å‹•ç¸½æœƒ", "å½°åŒ–ç¸£é«”è‚²æœƒ"],
        answer: "ä¸­è¯æ°‘åœ‹é«”è‚²é‹å‹•ç¸½æœƒ"
      },
      {
        q: "å¥—è·¯æ¯”è³½æ™‚é–“é™åˆ¶ç‚ºï¼Ÿ",
        options: ["ä¸å¾—è¶…é4åˆ†é˜", "ä¸å¾—è¶…é5åˆ†é˜", "ä¸å¾—è¶…é6åˆ†é˜", "ä¸å¾—è¶…é8åˆ†é˜"],
        answer: "ä¸å¾—è¶…é6åˆ†é˜"
      },
      {
        q: "æ¸…å¯’å­¸ç”Ÿè‹¥æå‡ºå­¸æ ¡è­‰æ˜ï¼Œå¯ä»¥äº«æœ‰ä»€éº¼å„ªæƒ ï¼Ÿ",
        options: ["å ±åè²»åŠåƒ¹", "å…æ”¶å ±åè²»", "å¯å ±åä¸é™é …ç›®", "æä¾›å…è²»åˆé¤"],
        answer: "å…æ”¶å ±åè²»"
      },
      {
        q: "æœ¬æ¬¡æ¯”è³½çš„æ‰¿è¾¦å–®ä½æ˜¯ï¼Ÿ",
        options: ["å½°åŒ–ç¸£é«”è‚²æœƒåœ‹è¡“å§”å“¡æœƒ", "å½°åŒ–ç¸£æ”¿åºœ", "å½°åŒ–ç¸£è­°æœƒ", "å½°åŒ–å¸‚å—èˆˆåœ‹å°"],
        answer: "å½°åŒ–ç¸£é«”è‚²æœƒåœ‹è¡“å§”å“¡æœƒ"
      }
    ];

    // æ´—ç‰Œï¼ˆFisherâ€“Yatesï¼‰
    function shuffle(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    const state = {
      order: shuffle([...Array(QUESTIONS.length).keys()]),
      idx: 0,
      score: 0,
      history: [],
      start: Date.now()
    };

    const els = {
      q: document.getElementById("question"),
      opts: document.getElementById("options"),
      feedback: document.getElementById("feedback"),
      next: document.getElementById("next-btn"),
      skip: document.getElementById("skip-btn"),
      scorePill: document.getElementById("score-pill"),
      progressText: document.getElementById("progress-text"),
      bar: document.getElementById("progress-bar"),
      quizCard: document.getElementById("quiz-card"),
      resultCard: document.getElementById("result-card"),
      finalScore: document.getElementById("final-score"),
      timeUsed: document.getElementById("time-used"),
      review: document.getElementById("review"),
      retry: document.getElementById("retry-btn"),
      download: document.getElementById("download-btn"),
    };

    function renderQuestion() {
      const i = state.order[state.idx];
      const item = QUESTIONS[i];
      els.q.textContent = item.q;
      els.opts.innerHTML = "";
      els.feedback.textContent = "é¸æ“‡ä½ çš„ç­”æ¡ˆ";
      els.next.disabled = true;

      item.options.forEach((optText, k) => {
        const btn = document.createElement("button");
        btn.className = "opt";
        btn.textContent = String.fromCharCode(65 + k) + ". " + optText;
        btn.onclick = () => handleAnswer(optText, btn);
        els.opts.appendChild(btn);
      });

      const progress = ((state.idx) / QUESTIONS.length) * 100;
      els.bar.style.width = progress + "%";
      els.progressText.textContent = `ç¬¬ ${state.idx + 1} / ${QUESTIONS.length} é¡Œ`;
    }

    function lockOptions() {
      document.querySelectorAll("button.opt").forEach(b => b.disabled = true);
    }

    function handleAnswer(choiceText, btn) {
      const i = state.order[state.idx];
      const item = QUESTIONS[i];
      const correct = choiceText === item.answer;

      lockOptions();
      btn.classList.add(correct ? "correct" : "wrong");
      document.querySelectorAll("button.opt").forEach(b => {
        if (b.textContent.endsWith(item.answer)) b.classList.add("correct");
      });

      els.next.disabled = false;
      els.feedback.textContent = correct ? "âœ… ç­”å°äº†ï¼" : `âŒ ç­”éŒ¯äº†ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ï¼š${item.answer}`;
      if (correct) state.score += 1;

      state.history.push({
        index: i,
        question: item.q,
        selected: choiceText,
        correct: item.answer,
        isCorrect: correct
      });

      els.scorePill.textContent = `å¾—åˆ†ï¼š${state.score}`;
    }

    function nextQuestion(skipped = false) {
      if (skipped) {
        const i = state.order[state.idx];
        const item = QUESTIONS[i];
        state.history.push({
          index: i,
          question: item.q,
          selected: null,
          correct: item.answer,
          isCorrect: false,
          skipped: true
        });
      }

      state.idx += 1;
      if (state.idx >= QUESTIONS.length) {
        finish();
      } else {
        renderQuestion();
      }
    }

    function finish() {
      els.quizCard.style.display = "none";
      els.resultCard.style.display = "grid";
      const pct = Math.round((state.score / QUESTIONS.length) * 100);
      els.finalScore.innerHTML = `<div class="pill">ä½ çš„æˆç¸¾ï¼š${state.score} / ${QUESTIONS.length}ï¼ˆ${pct}%ï¼‰</div>`;
      const secs = Math.round((Date.now() - state.start) / 1000);
      els.timeUsed.textContent = `ä½œç­”æ™‚é–“ï¼š${secs} ç§’`;

      // é€²åº¦æ¢æ»¿æ ¼
      els.bar.style.width = "100%";
      els.progressText.textContent = `å®Œæˆ`;

      // å¯©é¡Œå›é¡§
      els.review.innerHTML = "";
      state.history.forEach((h, idx) => {
        const div = document.createElement("div");
        div.className = "item";
        const status = h.skipped ? "ï¼ˆç•¥éï¼‰" : (h.isCorrect ? "âœ…" : "âŒ");
        div.innerHTML = `<div><strong>ç¬¬ ${idx + 1} é¡Œ</strong> ${status}</div>
                         <div class="small muted" style="margin:6px 0;">${h.question}</div>
                         <div class="small">ä½ çš„ç­”æ¡ˆï¼š${h.selected ?? "â€”"}</div>
                         <div class="small">æ­£ç¢ºç­”æ¡ˆï¼š${h.correct}</div>`;
        els.review.appendChild(div);
      });
    }

    // ç¶å®šäº‹ä»¶
    els.next.addEventListener("click", () => nextQuestion(false));
    els.skip.addEventListener("click", () => {
      lockOptions();
      els.next.disabled = false;
      els.feedback.textContent = "å·²ç•¥éæ­¤é¡Œï¼ŒæŒ‰ã€ä¸‹ä¸€é¡Œã€ç¹¼çºŒã€‚";
      nextQuestion(true);
    });
    els.retry.addEventListener("click", () => {
      Object.assign(state, {
        order: shuffle([...Array(QUESTIONS.length).keys()]),
        idx: 0, score: 0, history: [], start: Date.now()
      });
      els.scorePill.textContent = "å¾—åˆ†ï¼š0";
      els.resultCard.style.display = "none";
      els.quizCard.style.display = "block";
      renderQuestion();
    });
    els.download.addEventListener("click", () => {
      const data = {
        finishedAt: new Date().toISOString(),
        score: state.score,
        total: QUESTIONS.length,
        history: state.history
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "quiz_result.json";
      a.click();
      URL.revokeObjectURL(url);
    });

    // å•Ÿå‹•
    renderQuestion();
  </script>
</body>
</html>
